<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boda Abril & Rodrigo</title>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600&family=Parisienne&display=swap" rel="stylesheet">
  <style>
    :root {
      --olive: #6B8E23;
      --olive-light: #9AB973;
      --bg: #FFFEF7;
      --dark: #2C2C2C;
    }
    body { margin:0; font-family: 'Cormorant Garamond', serif; background:var(--bg); color:var(--dark); }
    .wrap { max-width:980px; margin:0 auto; padding:28px; text-align:center; }
    header { padding:30px 10px; }
    h1 { font-family:'Parisienne', cursive; font-size:4rem; color:var(--olive); margin:6px 0; }
    h2 { font-size:1.4rem; font-weight:300; margin:0 0 8px; }
    .hero-img { width:220px; height:300px; margin:16px auto; background:linear-gradient(180deg,#fff,#f8f8f0); border-radius:12px; display:flex; align-items:center; justify-content:center; color:var(--olive); font-family:'Parisienne'; font-size:5rem; }
    .section { padding:28px 10px; }
    .contador { display:flex; justify-content:center; gap:12px; flex-wrap:wrap; margin:18px 0; }
    .unit { background:#fff; padding:12px 18px; border-radius:10px; border:1px solid var(--olive-light); min-width:90px; }
    .value { font-size:1.6rem; font-weight:700; color:var(--olive); }
    .label { font-size:0.8rem; color:var(--dark); text-transform:uppercase; letter-spacing:1px; }
    .rsvp-form { max-width:640px; margin:0 auto; background:#fff; padding:20px; border-radius:12px; border:1px solid var(--olive-light); box-shadow:0 6px 18px rgba(0,0,0,0.06); text-align:left; }
    .form-group { margin-bottom:14px; }
    label { display:block; margin-bottom:6px; font-weight:600; color:var(--dark); }
    input[type=text], input[type=number], textarea { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #ddd; font-family:inherit; font-size:1rem; }
    textarea { min-height:92px; resize:vertical; }
    button { display:inline-block; background:linear-gradient(180deg,var(--olive),#556B2F); color:#fff; padding:12px 20px; border-radius:28px; border:none; cursor:pointer; font-weight:700; }
    .mensaje { color:var(--olive); font-weight:700; margin-top:12px; display:none; }
    .companions-container { margin-top:8px; padding:10px; background:#FFFDF0; border-radius:8px; border:1px dashed var(--olive); }
    footer { text-align:center; margin-top:28px; padding:18px 10px; color:#777; font-size:0.9rem; }
    @media (max-width:600px) { h1 { font-size:3rem; } .hero-img { width:160px; height:220px; font-size:3rem; } }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="hero-img">A&R</div>
      <h1>Abril & Rodrigo</h1>
      <h2>29 de noviembre de 2025 â€” 1:00 PM (CDMX)</h2>
    </header>

    <section class="section">
      <div id="contador" class="contador" aria-hidden="true">
        <div class="unit"><div class="value" id="dias">--</div><div class="label">DÃ­as</div></div>
        <div class="unit"><div class="value" id="horas">--</div><div class="label">Horas</div></div>
        <div class="unit"><div class="value" id="minutos">--</div><div class="label">Minutos</div></div>
        <div class="unit"><div class="value" id="segundos">--</div><div class="label">Segundos</div></div>
      </div>
    </section>

    <section class="section">
      <div class="rsvp-form" id="rsvpFormContainer">
        <h3 style="font-family:'Parisienne',cursive; color:var(--olive); text-align:center; margin-bottom:12px;">Confirma tu asistencia</h3>
        <form id="rsvpForm" autocomplete="off">
          <div class="form-group">
            <label for="nombre">Nombre completo</label>
            <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre completo">
          </div>

          <div class="form-group">
            <label for="acompanantes">NÃºmero de acompaÃ±antes (mÃ¡x 8)</label>
            <input type="number" id="acompanantes" name="acompanantes" min="0" max="8" value="0">
          </div>

          <div id="contenedorAcompanantes" class="companions-container" style="display:none;"></div>

          <div class="form-group">
            <label for="comentario">Comentario o mensaje</label>
            <textarea id="comentario" name="comentario" placeholder="Â¡Felicidades!"></textarea>
          </div>

          <div style="text-align:center;">
            <button type="submit">Enviar confirmaciÃ³n</button>
          </div>
          <p id="mensajeConfirmacion" class="mensaje">ðŸ’Œ Gracias por confirmar tu asistencia. Â¡Nos vemos en la boda!</p>
        </form>
      </div>
    </section>

    <footer>
      Abril & Rodrigo Â· 29 de noviembre de 2025 Â· Gracias por acompaÃ±arnos
    </footer>
  </div>

  <script>
    // Countdown (Mexico UTC-6)
    (function(){
      const target = new Date('November 29, 2025 13:00:00 GMT-0600').getTime();
      function update() {
        const now = Date.now();
        const diff = target - now;
        if (diff <= 0) {
          document.getElementById('contador').innerHTML = '<div style="font-weight:700; color:var(--olive)">Â¡Hoy es el gran dÃ­a!</div>';
          return;
        }
        const days = Math.floor(diff / (1000*60*60*24));
        const hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
        const seconds = Math.floor((diff % (1000*60)) / 1000);
        document.getElementById('dias').textContent = days;
        document.getElementById('horas').textContent = hours;
        document.getElementById('minutos').textContent = minutes;
        document.getElementById('segundos').textContent = seconds;
      }
      update(); setInterval(update,1000);
    })();

    // RSVP form logic with dynamic companions
    (function(){
      const scriptURL = 'https://script.google.com/macros/s/AKfycbxfKI-Q1MVP_dwYB5q3ZNeNlhDSdkoMumbzXBbGAwK8jRu6y68Z2bDnNmeAY3Wnam0Q/exec';
      const form = document.getElementById('rsvpForm');
      const numInput = document.getElementById('acompanantes');
      const container = document.getElementById('contenedorAcompanantes');
      const mensaje = document.getElementById('mensajeConfirmacion');

      function renderCompanions(n) {
        container.innerHTML = '';
        if (!n || n <= 0) {
          container.style.display = 'none';
          return;
        }
        container.style.display = 'block';
        for (let i=1;i<=Math.min(8,n);i++) {
          const lbl = document.createElement('label');
          lbl.textContent = 'Nombre del acompaÃ±ante ' + i + ':';
          lbl.style.display = 'block';
          lbl.style.marginTop = '8px';
          const inp = document.createElement('input');
          inp.type = 'text';
          inp.name = 'acompanante_' + i;
          inp.placeholder = 'Nombre del acompaÃ±ante ' + i;
          inp.className = 'companion-input';
          container.appendChild(lbl);
          container.appendChild(inp);
        }
      }

      numInput.addEventListener('change', function(e){
        const v = parseInt(e.target.value) || 0;
        renderCompanions(v);
      });

      form.addEventListener('submit', function(e){
        e.preventDefault();
        // validate companion fields if number > 0
        const num = parseInt(numInput.value) || 0;
        const companionNames = [];
        for (let i=1;i<=Math.min(8,num);i++) {
          const el = form.querySelector('[name="acompanante_' + i + '"]');
          const val = el ? el.value : '';
          if (!val.trim()) {
            alert('Por favor escribe el nombre del acompaÃ±ante ' + i + ' o reduce el nÃºmero de acompaÃ±antes.');
            return;
          }
          companionNames.push(val.trim());
        }
        const payload = {
          nombre: form.nombre.value || '',
          acompanantes: companionNames.join(', '),
          comentario: form.comentario.value || ''
        };
        fetch(scriptURL, {
          method:'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        }).then(function(res) {
          if (res.ok) {
            form.reset();
            container.innerHTML = '';
            container.style.display = 'none';
            mensaje.style.display = 'block';
            setTimeout(()=> mensaje.style.display='none',6000);
          } else {
            res.text().then(t => alert('Error al enviar: ' + t));
          }
        }).catch(function(){
          alert('Error de conexiÃ³n. Revisa tu red o la configuraciÃ³n del script.');
        });
      });
    })();
  </script>
</body>
</html>
